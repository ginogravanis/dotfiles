#!/usr/bin/env bash
# depends: redshift

timeout=10
pid=$(pgrep redshift)

killredshift() {
   if [ -n "$pid" ]
   then
      kill -s 9 "$pid"
      timeout ${timeout} tail -f --pid="$pid" /dev/null
   fi
}

case $1 in
   "")
      killredshift
      redshift -PO 2000
      ;;
   "reset" | "r")
      killredshift
      redshift -x
      ;;
   *)
      killredshift
      redshift -PO "$@"
      ;;
esac
